---
export interface Props {
  gutter: string;
  sidebarWidth: string;
  notSidebarMinSize: string;
  sidebarRight: boolean;
}

const {
  gutter = "var(--space-size-1)",
  sidebarWidth = "auto",
  notSidebarMinSize = "66.666%",
  sidebarRight = false,
} = Astro.props;

const flexDirection = sidebarRight ? "row-reverse" : "row";
---

<div class="has-sidebar">
  <div class="sidebar">
    <slot name="sidebar" />
  </div>
  <div class="not-sidebar">
    <slot name="not-sidebar" />
  </div>
</div>

<style define:vars={{ gutter, sidebarWidth, notSidebarMinSize, flexDirection }}>
  .has-sidebar {
    display: flex;
    flex-wrap: wrap;
    gap: var(--gutter);
    flex-direction: var(--flexDirection);
  }

  .sidebar {
    flex-basis: var(--sidebarWidth);
    flex-grow: 1;
  }

  .not-sidebar {
    flex-basis: 0;
    flex-grow: 999;
    min-inline-size: var(--notSidebarMinSize);
  }
</style>
